# Implementation Checklist: Project Management User Stories

This document provides a detailed implementation plan for User Stories 1.1, 1.4, 1.5, 1.6, and 1.7 from the Project Management feature set, following Test Driven Development methodology while utilizing the existing database schema and codebase.

## US1.1: Create a New Project

### Backend Implementation

#### 1. Domain Model
- [x] Verify the existing `Project` entity matches requirements
  - [x] Ensure it contains fields: id, name, description, status, createdAt, updatedAt, createdBy
  - [x] Add any missing fields if needed

#### 2. Repository Layer
- [x] Update `ProjectRepository` interface if needed
  - [x] Write test for saving a new project
  - [x] Ensure repository supports necessary operations

#### 3. Service Layer
- [x] Update `ProjectService` interface
  - [x] Define method for creating a new project
  - [x] Define method for validating project data

- [x] Update `ProjectServiceImpl` class
  - [x] Write test for project creation
  - [x] Write test for validation logic
  - [x] Implement service methods
  - [x] Add authorization checks for Director role

#### 4. DTO Objects
- [x] Create `ProjectCreateDTO` class
  - [x] Include fields: name, description
  - [x] Write test for DTO validation

- [x] Update `ProjectMapper` interface/class
  - [x] Write test for mapping ProjectCreateDTO to Project entity
  - [x] Implement mapper methods

#### 5. Controller Layer
- [x] Update `ProjectController` class
  - [x] Write test for POST /api/projects endpoint
  - [x] Write test for validation errors
  - [x] Implement controller method
  - [x] Add proper authorization checks (Director role)

#### 6. Integration Tests
- [x] Write integration test for the complete flow
  - [x] Test creating a project with valid data
  - [x] Test validation errors
  - [x] Test proper authorization

### Frontend Implementation

#### 1. API Client
- [x] Update `projectApi.ts` file
  - [x] Write test for creating a new project
  - [x] Implement API client method

#### 2. Redux State Management
- [x] Update `projectSlice.ts` file
  - [x] Write test for createProject async thunk
  - [x] Implement action creators, reducers, and selectors

#### 3. Components
- [x] Create `ProjectForm` component
  - [x] Write test for form rendering
  - [x] Write test for form validation
  - [x] Write test for form submission
  - [x] Implement component

#### 4. Page Component
- [x] Create `CreateProjectPage` component
  - [x] Write test for form rendering
  - [x] Write test for form submission
  - [x] Write test for authorization check
  - [x] Write test for navigation after successful creation
  - [x] Implement page component

#### 5. Routing
- [x] Update router configuration
  - [x] Add route for create project page
  - [x] Add route guard for Director role

## US1.4: Manage Project Membership

### Backend Implementation

#### 1. Domain Model
- [ ] Create/verify `ProjectMember` entity
  - Ensure it contains fields: id, projectId, userId, role, addedAt, addedBy
  - Add any missing fields if needed

#### 2. Repository Layer
- [ ] Create `ProjectMemberRepository` interface
  - [ ] Write test for finding members by projectId
  - [ ] Write test for finding a specific project member
  - [ ] Write test for saving a project member
  - [ ] Write test for deleting a project member
  - [ ] Implement the repository interface

#### 3. Service Layer
- [ ] Create `ProjectMemberService` interface
  - [ ] Define method for retrieving project members
  - [ ] Define method for adding a member to a project
  - [ ] Define method for updating a member's role
  - [ ] Define method for removing a member from a project

- [ ] Create `ProjectMemberServiceImpl` class
  - [ ] Write test for retrieving project members
  - [ ] Write test for adding a member
  - [ ] Write test for updating a member's role
  - [ ] Write test for removing a member
  - [ ] Implement service methods
  - [ ] Add authorization checks (Director or Project Manager role)

#### 4. DTO Objects
- [ ] Create `ProjectMemberDTO` class
  - [ ] Include fields: id, userId, userName, userEmail, role, addedAt
  - [ ] Write test for DTO conversion

- [ ] Create `ProjectMemberCreateDTO` class
  - [ ] Include fields: userId, role
  - [ ] Write test for DTO validation

- [ ] Create `ProjectMemberUpdateDTO` class
  - [ ] Include fields: role
  - [ ] Write test for DTO validation

- [ ] Create `ProjectMemberMapper` interface/class
  - [ ] Write test for mapping between entity and DTOs
  - [ ] Implement mapper methods

#### 5. Controller Layer
- [ ] Create `ProjectMemberController` class
  - [ ] Write test for GET /api/projects/{id}/members endpoint
  - [ ] Write test for POST /api/projects/{id}/members endpoint
  - [ ] Write test for PUT /api/projects/{id}/members/{memberId} endpoint
  - [ ] Write test for DELETE /api/projects/{id}/members/{memberId} endpoint
  - [ ] Implement controller methods
  - [ ] Add proper authorization checks

#### 6. Integration Tests
- [ ] Write integration test for the complete flow
  - [ ] Test retrieving project members
  - [ ] Test adding a member
  - [ ] Test updating a member's role
  - [ ] Test removing a member
  - [ ] Test proper authorization

### Frontend Implementation

#### 1. API Client
- [ ] Create/update `projectMemberApi.ts` file
  - [ ] Write test for fetching project members
  - [ ] Write test for adding a member
  - [ ] Write test for updating a member
  - [ ] Write test for removing a member
  - [ ] Implement API client methods

#### 2. Redux State Management
- [ ] Create `projectMemberSlice.ts` file
  - [ ] Define state interface with members array, loading state, error state
  - [ ] Write tests for async thunks
  - [ ] Write tests for reducers
  - [ ] Implement slice with reducers and selectors

#### 3. Components
- [ ] Create `ProjectMemberList` component
  - [ ] Write test for rendering member list
  - [ ] Write test for empty state
  - [ ] Implement component

- [ ] Create `AddMemberForm` component
  - [ ] Write test for form rendering
  - [ ] Write test for user selection
  - [ ] Write test for role selection
  - [ ] Write test for form submission
  - [ ] Implement component

- [ ] Create `EditMemberRoleForm` component
  - [ ] Write test for form rendering
  - [ ] Write test for role selection
  - [ ] Write test for form submission
  - [ ] Implement component

- [ ] Create `RemoveMemberConfirmation` component
  - [ ] Write test for confirmation dialog
  - [ ] Write test for confirm/cancel actions
  - [ ] Implement component

#### 4. Page Component
- [ ] Create `ProjectMembersPage` component
  - [ ] Write test for loading members on mount
  - [ ] Write test for adding a member
  - [ ] Write test for updating a member's role
  - [ ] Write test for removing a member
  - [ ] Write test for authorization checks
  - [ ] Implement page component

#### 5. Routing
- [ ] Update router configuration
  - [ ] Add route for project members page
  - [ ] Add route guard for appropriate roles

## US1.5: Update Project Details

### Backend Implementation

#### 1. Service Layer
- [x] Update `ProjectService` interface
  - [x] Define method for updating a project

- [x] Update `ProjectServiceImpl` class
  - [x] Write test for project update
  - [x] Implement service method
  - [x] Add authorization checks (Director or Project Manager role)

#### 2. DTO Objects
- [x] Create `ProjectUpdateDTO` class
  - [x] Include fields: name, description, status
  - [x] Write test for DTO validation

- [x] Update `ProjectMapper` interface/class
  - [x] Write test for mapping ProjectUpdateDTO to Project entity
  - [x] Implement mapper methods

#### 3. Controller Layer
- [x] Update `ProjectController` class
  - [x] Write test for PUT /api/projects/{id} endpoint
  - [x] Implement controller method
  - [x] Add proper authorization checks

#### 4. Integration Tests
- [x] Write integration test for the complete flow
  - [x] Test updating a project with valid data
  - [x] Test validation errors
  - [x] Test proper authorization

### Frontend Implementation

#### 1. API Client
- [x] Update `projectApi.ts` file
  - [x] Write test for updating a project
  - [x] Implement API client method

#### 2. Redux State Management
- [x] Update `projectSlice.ts` file
  - [x] Write test for updateProject async thunk
  - [x] Implement action creators, reducers, and selectors

#### 3. Components
- [x] Create `EditProjectForm` component
  - [x] Write test for form rendering with initial values
  - [x] Write test for form validation
  - [x] Write test for form submission
  - [x] Implement component

#### 4. Page Component
- [x] Create `EditProjectPage` component
  - [x] Write test for loading project data
  - [x] Write test for form submission
  - [x] Write test for authorization check
  - [x] Write test for navigation after successful update
  - [x] Implement page component

#### 5. Routing
- [x] Update router configuration
  - [x] Add route for edit project page
  - [x] Add route guard for appropriate roles

## US1.6: Archive a Project

### Backend Implementation

#### 1. Service Layer
- [ ] Update `ProjectService` interface
  - [ ] Define method for archiving a project

- [ ] Update `ProjectServiceImpl` class
  - [ ] Write test for project archiving
  - [ ] Implement service method
  - [ ] Add authorization checks (Director role)

#### 2. Controller Layer
- [ ] Update `ProjectController` class
  - [ ] Write test for PUT /api/projects/{id}/archive endpoint
  - [ ] Implement controller method
  - [ ] Add proper authorization checks

#### 3. Integration Tests
- [ ] Write integration test for the complete flow
  - [ ] Test archiving a project
  - [ ] Test retrieving archived projects
  - [ ] Test proper authorization

### Frontend Implementation

#### 1. API Client
- [ ] Update `projectApi.ts` file
  - [ ] Write test for archiving a project
  - [ ] Write test for fetching archived projects
  - [ ] Implement API client methods

#### 2. Redux State Management
- [ ] Update `projectSlice.ts` file
  - [ ] Write test for archiveProject async thunk
  - [ ] Write test for fetchArchivedProjects async thunk
  - [ ] Implement action creators, reducers, and selectors

#### 3. Components
- [ ] Create `ArchiveProjectConfirmation` component
  - [ ] Write test for confirmation dialog
  - [ ] Write test for confirm/cancel actions
  - [ ] Implement component

- [ ] Update `ProjectList` component
  - [ ] Write test for displaying archived status
  - [ ] Update component to handle archived projects

#### 4. Page Component
- [ ] Create `ArchivedProjectsPage` component
  - [ ] Write test for loading archived projects
  - [ ] Write test for authorization check
  - [ ] Implement page component

#### 5. Routing
- [ ] Update router configuration
  - [ ] Add route for archived projects page
  - [ ] Add route guard for Director role

## US1.7: Delete a Project

### Backend Implementation

#### 1. Service Layer
- [ ] Update `ProjectService` interface
  - [ ] Define method for deleting a project

- [ ] Update `ProjectServiceImpl` class
  - [ ] Write test for project deletion
  - [ ] Implement service method with cascade delete for all related data
  - [ ] Add authorization checks (Director role)

#### 2. Controller Layer
- [ ] Update `ProjectController` class
  - [ ] Write test for DELETE /api/projects/{id} endpoint
  - [ ] Implement controller method
  - [ ] Add proper authorization checks

#### 3. Integration Tests
- [ ] Write integration test for the complete flow
  - [ ] Test deleting a project
  - [ ] Test proper authorization
  - [ ] Test cascade deletion of related data

### Frontend Implementation

#### 1. API Client
- [ ] Update `projectApi.ts` file
  - [ ] Write test for deleting a project
  - [ ] Implement API client method

#### 2. Redux State Management
- [ ] Update `projectSlice.ts` file
  - [ ] Write test for deleteProject async thunk
  - [ ] Implement action creators, reducers, and selectors

#### 3. Components
- [ ] Create `DeleteProjectConfirmation` component
  - [ ] Write test for confirmation dialog with warning message
  - [ ] Write test for confirm/cancel actions
  - [ ] Implement component

#### 4. Integration
- [ ] Update `ProjectDetailsPage` component
  - [ ] Add delete project option
  - [ ] Write test for delete confirmation flow
  - [ ] Write test for navigation after successful deletion
  - [ ] Implement functionality

## Testing Strategy

### Unit Tests
- [ ] Backend: Repository tests
  - Test data operations with various parameters

- [ ] Backend: Service tests
  - Test business logic with mocked repositories
  - Test authorization checks
  - Test validation logic

- [ ] Backend: Controller tests
  - Test endpoints with mocked services
  - Test authorization requirements
  - Test response formats
  - Test validation error handling

- [ ] Frontend: Component tests
  - Test rendering with various props
  - Test user interactions
  - Test form validation
  - Test loading/error states

- [ ] Frontend: Redux tests
  - Test action creators
  - Test reducers
  - Test selectors
  - Test async thunks

### Integration Tests
- [ ] Backend API tests
  - Test complete flow from controller to database
  - Test with authentication
  - Test authorization rules

- [ ] Frontend integration tests
  - Test component interaction
  - Test data flow through Redux
  - Test navigation flows

## Implementation Steps (TDD Approach)

1. [ ] Start with writing tests for backend repository methods
2. [ ] Implement repository methods to pass tests
3. [ ] Write tests for service layer methods
4. [ ] Implement service layer to pass tests
5. [ ] Write tests for controller endpoints
6. [ ] Implement controllers to pass tests
7. [ ] Write tests for frontend API client
8. [ ] Implement API client to pass tests
9. [ ] Write tests for Redux slices
10. [ ] Implement Redux slices to pass tests
11. [ ] Write tests for UI components
12. [ ] Implement UI components to pass tests
13. [ ] Integrate components into pages
14. [ ] Perform end-to-end testing

## Definition of Done

### US1.1: Create a New Project
- [ ] Directors can access a form to create a new project
- [ ] Form validates input (required name, optional description)
- [ ] Successful creation redirects to the new project's page
- [ ] Error handling provides clear feedback

### US1.4: Manage Project Membership
- [ ] Directors and Project Managers can view project members
- [ ] Members can be added from existing users
- [ ] Member roles can be updated
- [ ] Members can be removed from projects
- [ ] Proper authorization checks are enforced

### US1.5: Update Project Details
- [ ] Directors and Project Managers can edit project details
- [ ] Form validates input
- [ ] Changes are reflected throughout the application
- [ ] Proper authorization checks are enforced

### US1.6: Archive a Project
- [ ] Directors can archive projects
- [ ] Archived projects are moved to a separate view
- [ ] Archived projects are read-only
- [ ] Proper authorization checks are enforced

### US1.7: Delete a Project
- [ ] Directors can delete projects
- [ ] Confirmation dialog warns about irreversible action
- [ ] All related data is properly deleted
- [ ] Proper authorization checks are enforced 