# Implementation Checklist: US1.2 - View All Projects

This document provides a detailed implementation plan for User Story 1.2 - View All Projects, following Test Driven Development methodology while utilizing the existing database schema.

## Overview

User Story 1.2 requires implementing functionality for Directors to view a list of all projects, displaying each project's name, status, and document count. The implementation will span both backend and frontend components.

## Backend Implementation

### 1. Domain Model

- [ ] Verify the existing `Project` entity matches the database schema
  - Ensure it contains fields: id, name, description, status, createdAt, updatedAt, createdBy
  - Add any missing getters/setters if needed

### 2. Repository Layer

- [ ] Create `ProjectRepository` interface extending JpaRepository
  - [ ] Write test for finding all projects with pagination
  - [ ] Write test for finding projects by status
  - [ ] Implement the repository interface

### 3. Service Layer

- [ ] Create `ProjectService` interface
  - [ ] Define method for retrieving all projects with pagination
  - [ ] Define method for retrieving project count statistics

- [ ] Create `ProjectServiceImpl` class
  - [ ] Write test for retrieving paginated projects
  - [ ] Write test for retrieving projects filtered by status
  - [ ] Write test for calculating document counts per project
  - [ ] Implement service methods

### 4. DTO Objects

- [ ] Create `ProjectListDTO` class
  - [ ] Include fields: id, name, status, documentCount, createdAt
  - [ ] Write test for DTO conversion

- [ ] Create `ProjectMapper` interface/class
  - [ ] Write test for mapping Project entity to ProjectListDTO
  - [ ] Implement mapper methods

### 5. Controller Layer

- [ ] Create `ProjectController` class
  - [ ] Write test for GET /api/projects endpoint with pagination
  - [ ] Write test for GET /api/projects with status filter
  - [ ] Implement controller methods
  - [ ] Add proper authorization checks (Director role)

### 6. Integration Tests

- [ ] Write integration test for the complete flow
  - [ ] Test retrieving projects with pagination
  - [ ] Test filtering by status
  - [ ] Test proper authorization

## Frontend Implementation

### 1. API Client

- [ ] Create/update `projectApi.ts` file
  - [ ] Write test for fetching projects with pagination
  - [ ] Write test for fetching projects with filters
  - [ ] Implement API client methods

### 2. Redux State Management

- [ ] Create `projectSlice.ts` file
  - [ ] Define state interface with projects array, loading state, error state
  - [ ] Write test for fetchProjects async thunk
  - [ ] Write test for project reducers
  - [ ] Implement slice with reducers and selectors

### 3. Components

- [ ] Create `ProjectList` component
  - [ ] Write test for rendering project list items
  - [ ] Write test for pagination controls
  - [ ] Write test for empty state
  - [ ] Implement component

- [ ] Create `ProjectListItem` component
  - [ ] Write test for rendering project details (name, status, document count)
  - [ ] Write test for click navigation
  - [ ] Implement component

- [ ] Create `ProjectFilter` component
  - [ ] Write test for status filter options
  - [ ] Write test for filter application
  - [ ] Implement component

### 4. Page Component

- [ ] Create `ProjectsPage` component
  - [ ] Write test for loading projects on mount
  - [ ] Write test for pagination handling
  - [ ] Write test for filter application
  - [ ] Write test for authorization check
  - [ ] Implement page component

### 5. Routing

- [ ] Update router configuration
  - [ ] Add route for projects page
  - [ ] Add route guard for Director role

## Testing Strategy

### Unit Tests

- [ ] Backend: Repository tests
  - Test data retrieval with various parameters

- [ ] Backend: Service tests
  - Test business logic with mocked repositories
  - Test document count calculation
  - Test pagination handling

- [ ] Backend: Controller tests
  - Test endpoints with mocked services
  - Test authorization requirements
  - Test response formats

- [ ] Frontend: Component tests
  - Test rendering with various props
  - Test user interactions
  - Test loading/error states

- [ ] Frontend: Redux tests
  - Test action creators
  - Test reducers
  - Test selectors
  - Test async thunks

### Integration Tests

- [ ] Backend API tests
  - Test complete flow from controller to database
  - Test with authentication

- [ ] Frontend integration tests
  - Test component interaction
  - Test data flow through Redux

## Implementation Steps (TDD Approach)

1. Start with writing tests for the backend repository methods
2. Implement the repository to pass tests
3. Write tests for service layer methods
4. Implement service layer to pass tests
5. Write tests for controller endpoints
6. Implement controller to pass tests
7. Write tests for frontend API client
8. Implement API client to pass tests
9. Write tests for Redux slice
10. Implement Redux slice to pass tests
11. Write tests for UI components
12. Implement UI components to pass tests
13. Integrate components into the page
14. Perform end-to-end testing

## Definition of Done

- [ ] All tests pass
- [ ] Code meets quality standards
- [ ] Feature is accessible only to Directors
- [ ] Projects display with name, status, and document count
- [ ] Pagination works correctly
- [ ] Filtering by status works correctly
- [ ] Clicking on a project navigates to its details page 