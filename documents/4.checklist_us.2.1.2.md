# Implementation Checklist: US1.2 - View All Projects

This document provides a detailed implementation plan for User Story 1.2 - View All Projects, following Test Driven Development methodology while utilizing the existing database schema.

## Overview

User Story 1.2 requires implementing functionality for Directors to view a list of all projects, displaying each project's name, status, and document count. The implementation will span both backend and frontend components.

## Backend Implementation

### 1. Domain Model

- [x] Verify the existing `Project` entity matches the database schema
  - Ensure it contains fields: id, name, description, status, createdAt, updatedAt, createdBy
  - Add any missing getters/setters if needed

### 2. Repository Layer

- [x] Create `ProjectRepository` interface extending JpaRepository
  - [x] Write test for finding all projects with pagination
  - [x] Write test for finding projects by status
  - [x] Implement the repository interface

### 3. Service Layer

- [x] Create `ProjectService` interface
  - [x] Define method for retrieving all projects with pagination
  - [x] Define method for retrieving project count statistics

- [x] Create `ProjectServiceImpl` class
  - [x] Write test for retrieving paginated projects
  - [x] Write test for retrieving projects filtered by status
  - [x] Write test for calculating document counts per project
  - [x] Implement service methods

### 4. DTO Objects

- [x] Create `ProjectListDTO` class
  - [x] Include fields: id, name, status, documentCount, createdAt
  - [x] Write test for DTO conversion

- [x] Create `ProjectMapper` interface/class
  - [x] Write test for mapping Project entity to ProjectListDTO
  - [x] Implement mapper methods

### 5. Controller Layer

- [x] Create `ProjectController` class
  - [x] Write test for GET /api/projects endpoint with pagination
  - [x] Write test for GET /api/projects with status filter
  - [x] Implement controller methods
  - [x] Add proper authorization checks (Director role)

### 6. Integration Tests

- [x] Write integration test for the complete flow
  - [x] Test retrieving projects with pagination
  - [x] Test filtering by status
  - [x] Test proper authorization

## Frontend Implementation

### 1. API Client

- [x] Create/update `projectApi.ts` file
  - [x] Write test for fetching projects with pagination
  - [x] Write test for fetching projects with filters
  - [x] Implement API client methods

### 2. Redux State Management

- [x] Create `projectSlice.ts` file
  - [x] Define state interface with projects array, loading state, error state
  - [x] Write test for fetchProjects async thunk
  - [x] Write test for project reducers
  - [x] Implement slice with reducers and selectors

### 3. Components

- [x] Create `ProjectList` component
  - [x] Write test for rendering project list items
  - [x] Write test for pagination controls
  - [x] Write test for empty state
  - [x] Implement component

- [x] Create `ProjectListItem` component
  - [x] Write test for rendering project details (name, status, document count)
  - [x] Write test for click navigation
  - [x] Implement component

- [x] Create `ProjectFilter` component
  - [x] Write test for status filter options
  - [x] Write test for filter application
  - [x] Implement component

### 4. Page Component

- [x] Create `ProjectsPage` component
  - [x] Write test for loading projects on mount
  - [x] Write test for pagination handling
  - [x] Write test for filter application
  - [x] Write test for authorization check
  - [x] Implement page component

### 5. Routing

- [x] Update router configuration
  - [x] Add route for projects page
  - [x] Add route guard for Director role

## Testing Strategy

### Unit Tests

- [x] Backend: Repository tests
  - Test data retrieval with various parameters

- [x] Backend: Service tests
  - Test business logic with mocked repositories
  - Test document count calculation
  - Test pagination handling

- [x] Backend: Controller tests
  - Test endpoints with mocked services
  - Test authorization requirements
  - Test response formats

- [x] Frontend: Component tests
  - Test rendering with various props
  - Test user interactions
  - Test loading/error states

- [x] Frontend: Redux tests
  - Test action creators
  - Test reducers
  - Test selectors
  - Test async thunks

### Integration Tests

- [x] Backend API tests
  - Test complete flow from controller to database
  - Test with authentication

- [x] Frontend integration tests
  - Test component interaction
  - Test data flow through Redux

## Implementation Steps (TDD Approach)

1. [x] Start with writing tests for the backend repository methods
2. [x] Implement the repository to pass tests
3. [x] Write tests for service layer methods
4. [x] Implement service layer to pass tests
5. [x] Write tests for controller endpoints
6. [x] Implement controller to pass tests
7. [x] Write tests for frontend API client
8. [x] Implement API client to pass tests
9. [x] Write tests for Redux slice
10. [x] Implement Redux slice to pass tests
11. [x] Write tests for UI components
12. [x] Implement UI components to pass tests
13. [x] Integrate components into the page
14. [x] Perform end-to-end testing

## Definition of Done

- [x] All tests pass
- [x] Code meets quality standards
- [x] Feature is accessible only to Directors
- [x] Projects display with name, status, and document count
- [x] Pagination works correctly
- [x] Filtering by status works correctly
- [x] Clicking on a project navigates to its details page 