# Test Cases: Intelligent Search & Chatbot

This document contains test cases for the Intelligent Search & Chatbot user stories (US3.1 - US3.5).

## TC-IS1: Document Content Indexing (US3.1)

### Description
Verify that the system automatically processes and indexes the content of uploaded documents.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)

### Test Steps
1. Upload a document with text content (e.g., PDF, DOCX, TXT) (TC-DH2)
2. Wait for the background indexing process to complete (may take a few moments)
3. Click on the chatbot button in the bottom-right corner of the interface
4. Ask a question specifically about the content in the newly uploaded document

### Expected Results
- Document is successfully uploaded
- Background indexing process completes without errors
- Chatbot can answer questions based on the content of the newly uploaded document
- Chatbot response includes reference to the newly uploaded document
- Chatbot responses are rendered with proper markdown formatting

### UI Elements
- Upload button and dialog (as described in TC-DH2)
- Chatbot button (chat bubble icon in the bottom-right corner)
- Chatbot interface with:
  - Header with title and close button
  - Message history area showing user and bot messages
  - Input field for questions
  - Send button
  - References/sources section in responses
  - Markdown-formatted text in bot responses

## TC-IS2: Failed Document Indexing (US3.1)

### Description
Verify that the system handles failures in document indexing gracefully.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)

### Test Steps
1. Upload a document with a supported format but corrupted content or with no extractable text
2. Wait for the background indexing process to attempt processing
3. Check system logs or admin notifications (if available to the user)
4. Try asking the chatbot a question about the document content

### Expected Results
- Document upload itself succeeds
- System handles the indexing failure gracefully
- If the chatbot is asked about the document content, it responds appropriately (e.g., indicating it doesn't have information about that document)
- System continues to function normally despite the indexing failure

### UI Elements
- Upload button and dialog (as described in TC-DH2)
- Chatbot interface
- Possibly an admin notification area for indexing failures (if implemented)

## TC-IS3: Access Chatbot Interface (US3.2)

### Description
Verify that users can easily access the chatbot interface.

### Pre-conditions
- User is logged in (TC-C1)
- User has access to at least one project

### Test Steps
1. Look for a chatbot button (chat bubble icon) in the bottom-right corner of the screen
2. Click on the chatbot button

### Expected Results
- Chatbot button is clearly visible in the bottom-right corner of the interface
- Clicking the button opens the chatbot interface panel
- Chatbot interface includes a message history area and text input field
- Chatbot displays a welcome message and suggested queries

### UI Elements
- Chatbot button (chat bubble icon in the bottom-right corner)
- Chatbot interface panel with:
  - Header with title and close (X) button
  - Message history area showing user and bot messages
  - Input field for questions
  - Send button
  - Suggested queries buttons at the start of conversation

## TC-IS4: Ask Question Within Project (US3.3)

### Description
Verify that users can ask questions about documents within a specific project.

### Pre-conditions
- User is logged in (TC-C1)
- User has navigated to a specific project with indexed documents
- User has opened the chatbot interface (TC-IS3)

### Test Steps
1. Verify the chatbot interface indicates it's in project-specific mode
2. Type a question related to the project documents in the input field
3. Click the Send button or press Enter
4. Wait for the chatbot to process and respond

### Expected Results
- Question is displayed in the message history as a user message
- Loading indicator appears while the chatbot processes the question
- Chatbot responds with relevant information from the project documents
- Response is formatted with markdown for better readability
- Response includes references to specific documents where the information was found
- References include document names and are clickable

### UI Elements
- Chatbot interface with:
  - Project-specific mode indicator
  - Input field for typing questions
  - Send button
  - Loading indicator during processing
  - Message history showing user questions and bot responses
  - Markdown-formatted text in bot responses
  - Document references in responses

## TC-IS5: Global Knowledge Base Query (US3.4)

### Description
Verify that Directors can ask questions about the global knowledge base.

### Pre-conditions
- User is logged in as a Director (TC-C1)
- User has opened the chatbot interface (TC-IS3)

### Test Steps
1. If in project-specific mode, click on the mode toggle to switch to global mode
2. Type a question related to general company knowledge in the input field
3. Click the Send button or press Enter
4. Wait for the chatbot to process and respond

### Expected Results
- Chatbot interface indicates it's in global mode
- Question is displayed in the message history as a user message
- Loading indicator appears while the chatbot processes the question
- Chatbot responds with relevant information from the global knowledge base
- Response is formatted with markdown for better readability
- Response includes references to specific documents or knowledge sources

### UI Elements
- Chatbot interface with:
  - Mode toggle between project-specific and global mode (for Directors only)
  - Global mode indicator
  - Input field for typing questions
  - Send button
  - Loading indicator during processing
  - Message history showing user questions and bot responses
  - Markdown-formatted text in bot responses
  - Document/source references in responses

## TC-IS6: Chatbot Session Persistence (US3.5)

### Description
Verify that chatbot conversations persist within a user session.

### Pre-conditions
- User is logged in (TC-C1)
- User has had a conversation with the chatbot (TC-IS4 or TC-IS5)

### Test Steps
1. After having a conversation with the chatbot, close the chatbot interface
2. Navigate to a different page within the application
3. Open the chatbot interface again

### Expected Results
- Previous conversation history is preserved and displayed
- User can continue the conversation where they left off
- Conversation context is maintained

### UI Elements
- Chatbot button
- Chatbot interface with preserved message history

## TC-IS7: Chatbot Response with No Relevant Information (US3.3, US3.4)

### Description
Verify that the chatbot responds appropriately when it doesn't have relevant information.

### Pre-conditions
- User is logged in (TC-C1)
- User has opened the chatbot interface (TC-IS3)

### Test Steps
1. Type a question about a topic that is not covered in any indexed documents
2. Click the Send button or press Enter
3. Wait for the chatbot to process and respond

### Expected Results
- Question is displayed in the message history as a user message
- Loading indicator appears while the chatbot processes the question
- Chatbot responds with a message indicating it doesn't have relevant information
- Response suggests alternative queries or approaches
- Response is formatted with markdown for better readability

### UI Elements
- Chatbot interface with:
  - Input field for typing questions
  - Send button
  - Loading indicator during processing
  - Message history showing user questions and bot responses
  - Markdown-formatted text in bot responses 