# Test Cases: Document Handling

This document contains test cases for the Document Handling user stories (US2.1 - US2.9).

## TC-DH1: Navigate Project Contents (US2.1)

### Description
Verify that authenticated users can navigate the folder and document structure of a project.

### Pre-conditions
- User is logged in (TC-C1)
- User has access to at least one project with multiple folders and documents
- User has navigated to a specific project's details page (TC-C5)

### Test Steps
1. Click on the "View Documents" button with folder icon
2. Observe the folder structure in the left sidebar
3. Click on a folder to view its contents
4. Navigate back to a parent folder using breadcrumbs

### Expected Results
- User is redirected to the project documents page
- Folder structure is displayed in the left sidebar as a tree view
- Clicking on a folder shows its contents in the main content area
- Breadcrumbs show the current path within the folder structure
- Navigation back to parent folders works correctly

### UI Elements
- "View Documents" button with folder icon on project details page
- Folder tree component in the left sidebar
- Document list in the main content area
- Breadcrumbs component showing the current path
- Loading indicators when fetching folders/documents

## TC-DH2: Upload Single Document (US2.2)

### Description
Verify that a Project Manager can upload a single document to a project folder.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)

### Test Steps
1. Navigate to the desired folder for upload
2. Click on "Upload" button
3. Select a single file (e.g., a PDF document) from the file selector
4. Confirm the upload by clicking "Upload" button in the upload dialog

### Expected Results
- Upload progress indicator is shown
- Document is successfully uploaded to the selected folder
- New document appears in the folder's contents list
- Success toast message is displayed

### UI Elements
- "Upload" button in the document list toolbar
- Document upload dialog with:
  - File selector/drop area
  - Selected file information display
  - "Upload" button to confirm
  - "Cancel" button to dismiss
- Progress indicator during upload
- Toast notification for success/error messages

## TC-DH3: Upload Multiple Documents (US2.2)

### Description
Verify that a Project Manager can upload multiple documents simultaneously.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)

### Test Steps
1. Navigate to the desired folder for upload
2. Click on "Upload" button
3. Select multiple files of different formats (e.g., PDF, DOCX, TXT) from the file selector
4. Confirm the upload by clicking "Upload" button in the upload dialog

### Expected Results
- Upload progress indicator is shown for each file
- All documents are successfully uploaded to the selected folder
- New documents appear in the folder's contents list
- Success toast message is displayed

### UI Elements
- "Upload" button in the document list toolbar
- Document upload dialog with:
  - File selector/drop area with multiple file selection
  - List of selected files with information
  - "Upload" button to confirm
  - "Cancel" button to dismiss
- Progress indicator for each file during upload
- Toast notification for success/error messages

### Negative Test Cases
- TC-DH3.1: Attempt to upload a file with an unsupported format
- TC-DH3.2: Attempt to upload a file that exceeds the maximum file size limit
- TC-DH3.3: Attempt to upload a file with a name containing invalid characters

## TC-DH4: Create Folder (US2.3)

### Description
Verify that a Project Manager can create a new folder within a project's directory.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)

### Test Steps
1. Navigate to the desired parent folder
2. Click on "Create Folder" button
3. Enter a valid folder name in the "Folder Name" field
4. Click "Create" button

### Expected Results
- New folder is created successfully
- New folder appears in the folder tree and current directory's contents
- Success toast message is displayed
- Create folder dialog closes automatically

### UI Elements
- "Create Folder" button in the document list toolbar
- Create Folder dialog with:
  - "Folder Name" input field
  - "Create" button to confirm
  - "Cancel" button to dismiss
- Toast notification for success/error messages
- Visual update of folder tree to include the new folder

### Negative Test Cases
- TC-DH4.1: Attempt to create a folder with an empty name
- TC-DH4.2: Attempt to create a folder with a name containing invalid characters
- TC-DH4.3: Attempt to create a folder with a name that already exists in the current directory

## TC-DH5: View Document In-App (US2.4)

### Description
Verify that users can view documents directly in the browser.

### Pre-conditions
- User is logged in (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains at least one document of each supported format (PDF, TXT, image)

### Test Steps
1. Click on a PDF document in the list
2. Observe the document viewer
3. Close the viewer and return to the document list
4. Click on a TXT document in the list
5. Observe the document viewer
6. Close the viewer and return to the document list
7. Click on an image file in the list
8. Observe the document viewer

### Expected Results
- PDF document opens in an in-app viewer that correctly renders the content
- TXT document opens in an in-app viewer that displays the text content
- Image file opens in an in-app viewer that displays the image
- For each format, the viewer provides appropriate controls (zoom, scroll, etc.)
- User can close the viewer and return to the document list

### UI Elements
- Document list with clickable document items
- Document viewer modal/panel with:
  - Document content display area
  - Close button
  - Format-specific controls (zoom, pagination for PDFs, etc.)
- Different viewer components for different file types

## TC-DH6: View Unsupported Document Format (US2.4)

### Description
Verify that the system handles unsupported file formats appropriately.

### Pre-conditions
- User is logged in (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains at least one document with an unsupported format (e.g., complex spreadsheet)

### Test Steps
1. Click on a document with an unsupported format in the list

### Expected Results
- System displays a message that the file format cannot be viewed in-app
- User is prompted to download the file instead
- A download button/link is provided

### UI Elements
- Document viewer with message about unsupported format
- Download button/link for the file
- Possibly an icon indicating the file type

## TC-DH7: Download Document (US2.5)

### Description
Verify that users can download documents.

### Pre-conditions
- User is logged in (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains at least one document

### Test Steps
1. Locate a document in the list
2. Click on the "Download" icon or option for that document

### Expected Results
- Document download initiates
- File is saved to the user's local machine
- Downloaded file is identical to the original file (same format, content, and size)

### UI Elements
- "Download" icon/button for each document in the list
- Download progress indicator (if applicable)
- Browser's native download handling UI

## TC-DH8: Search for Documents by Name (US2.6)

### Description
Verify that users can search for documents by file name within a project.

### Pre-conditions
- User is logged in (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains multiple documents with distinctive names

### Test Steps
1. Locate the search bar in the project's document section
2. Enter a search query that matches part of a document's name
3. Observe the search results

### Expected Results
- Search results display documents whose names match the query
- Each result shows the document name, type icon, and its folder path
- Clicking on a search result navigates to that document
- If no documents match the query, an appropriate "no results" message is displayed

### UI Elements
- Search bar in the document list toolbar
- Search results list replacing the regular document list
- Document items with name, type icon, and folder path
- "No results" message when search returns empty
- Clear search/reset button

## TC-DH9: Delete Document (US2.7)

### Description
Verify that a Project Manager can delete a document.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains at least one document

### Test Steps
1. Locate a document in the list
2. Click on the "Delete" icon for that document
3. Confirm the deletion in the confirmation dialog by clicking "Delete"

### Expected Results
- Document is deleted successfully
- Document no longer appears in the folder's contents
- Success toast message is displayed
- Confirmation dialog closes automatically

### UI Elements
- "Delete" icon/button for each document in the list
- Delete Document confirmation dialog with:
  - Warning message about permanent deletion
  - Document name to be deleted
  - "Delete" button to confirm
  - "Cancel" button to dismiss
- Toast notification for success/error messages

## TC-DH10: Delete Empty Folder (US2.7)

### Description
Verify that a Project Manager can delete an empty folder.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains at least one empty folder

### Test Steps
1. Locate an empty folder in the folder tree
2. Right-click on the folder or click on the folder options menu
3. Select "Delete" option
4. Confirm the deletion in the confirmation dialog by clicking "Delete"

### Expected Results
- Folder is deleted successfully
- Folder no longer appears in the folder tree
- Success toast message is displayed
- Confirmation dialog closes automatically

### UI Elements
- Folder context menu or options menu with "Delete" option
- Delete Folder confirmation dialog with:
  - Warning message about folder deletion
  - Folder name to be deleted
  - "Delete" button to confirm
  - "Cancel" button to dismiss
- Toast notification for success/error messages

## TC-DH11: Attempt to Delete Non-Empty Folder (US2.7)

### Description
Verify that the system prevents deletion of non-empty folders.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains at least one folder with documents or subfolders

### Test Steps
1. Locate a non-empty folder in the folder tree
2. Right-click on the folder or click on the folder options menu
3. Select "Delete" option
4. Observe the system response

### Expected Results
- System displays an error message indicating the folder is not empty
- Folder is not deleted
- Error toast message or dialog explains that non-empty folders cannot be deleted
- Folder and its contents remain intact

### UI Elements
- Folder context menu or options menu with "Delete" option
- Error message dialog or toast notification
- Folder tree remains unchanged

## TC-DH12: Upload New Version of Document (US2.8)

### Description
Verify that a Project Manager can upload a new version of an existing document.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains at least one document (e.g., "report.pdf")

### Test Steps
1. Navigate to the folder containing the existing document
2. Click on "Upload" button
3. Select a file with the same name as an existing document
4. Observe the system response - conflict detection dialog
5. Choose "Replace" option to create a new version
6. Confirm the upload

### Expected Results
- System detects the name conflict and displays a conflict resolution dialog
- "Replace" option is available in the dialog
- After selecting "Replace" and confirming, the new version is uploaded
- Document in the folder is updated to the new version
- Success toast message is displayed

### UI Elements
- "Upload" button in the document list toolbar
- Document upload dialog
- Conflict detection dialog with:
  - Warning about existing file with same name
  - "Replace" option
  - "Keep Both" option
  - "Cancel" option
- Toast notification for success/error messages

## TC-DH13: View Document Version History (US2.8)

### Description
Verify that users with appropriate permissions can view previous versions of a document.

### Pre-conditions
- User is logged in (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains at least one document with multiple versions (TC-DH12)

### Test Steps
1. Locate a document with multiple versions
2. Click on "Version History" or equivalent option in the document's context menu
3. View the list of previous versions
4. Select a previous version to view

### Expected Results
- List of document versions is displayed
- Each version shows relevant metadata (upload date, uploader, etc.)
- User can view any previous version
- User can download any previous version

### UI Elements
- Document context menu with "Version History" option
- Version history panel/modal with:
  - List of versions with metadata
  - Options to view or download each version
  - Possibly a comparison view between versions
- Close button to return to document list

## TC-DH14: Keep Both Files During Upload (US2.8)

### Description
Verify that a Project Manager can keep both files when uploading a file with the same name.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Project contains at least one document (e.g., "report.pdf")

### Test Steps
1. Navigate to the folder containing the existing document
2. Click on "Upload" button
3. Select a file with the same name as an existing document
4. Observe the system response - conflict detection dialog
5. Choose "Keep Both" option
6. Confirm the upload

### Expected Results
- System detects the name conflict and displays a conflict resolution dialog
- "Keep Both" option is available in the dialog
- After selecting "Keep Both" and confirming, the new file is uploaded with a modified name (e.g., "report (1).pdf")
- Both files appear in the folder
- Success toast message is displayed

### UI Elements
- "Upload" button in the document list toolbar
- Document upload dialog
- Conflict detection dialog with:
  - Warning about existing file with same name
  - "Replace" option
  - "Keep Both" option
  - "Cancel" option
- Toast notification for success/error messages

## TC-DH15: Reorder Documents (US2.9)

### Description
Verify that a Project Manager can manually reorder documents within a folder.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)
- User has navigated to a specific project's documents section (TC-DH1)
- Folder contains multiple documents

### Test Steps
1. Navigate to a folder with multiple documents
2. Click on "Reorder" or equivalent button to enter ordering mode
3. Drag and drop a document to a new position in the list
4. Drag and drop another document to a different position
5. Click "Save Order" or equivalent button to save the new order

### Expected Results
- Ordering mode allows documents to be dragged and dropped
- Documents visually move to their new positions during drag and drop
- After saving, the new order is preserved
- When other users view the folder, they see the documents in the same order

### UI Elements
- "Reorder" button or mode toggle in document list toolbar
- Visual indication that ordering mode is active
- Drag handles or visual cues for draggable documents
- "Save Order" button to confirm changes
- "Cancel" button to discard changes
- Toast notification for success/error messages 