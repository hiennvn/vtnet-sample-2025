# Test Cases: Security and Permissions

This document contains test cases for security and permissions across the system.

## TC-SP1: Role-Based Access Control - Director

### Description
Verify that a Director has access to all system features according to their role.

### Pre-conditions
- User is logged in as a Director (TC-C1)

### Test Steps
1. Navigate to the projects dashboard (TC-C3)
2. Attempt to create a new project (TC-PM1)
3. Navigate to User Management section (TC-C4)
4. Attempt to create a new user (TC-PM3)
5. Navigate to a specific project
6. Attempt to add a user to the project (TC-PM7)
7. Attempt to archive a project (TC-PM11)
8. Attempt to delete a project (TC-PM13)
9. Open the chatbot and toggle to global mode
10. Ask a question across all projects (TC-IS8)

### Expected Results
- Director can successfully perform all operations
- No permission errors are encountered
- All features are accessible

### UI Elements
- "Create New Project" button on projects dashboard
- "User Management" link in navigation
- "Create User" button on User Management page
- Project details page with all action buttons visible:
  - "Edit Project" button with edit icon
  - "Delete Project" button with delete icon
  - "Manage Members" button with people icon
  - "View Documents" button with folder icon
- Chatbot interface with global mode toggle

## TC-SP2: Role-Based Access Control - Project Manager

### Description
Verify that a Project Manager has access to features according to their role.

### Pre-conditions
- User is logged in as a Project Manager (TC-C1)

### Test Steps
1. Navigate to the projects dashboard (TC-C3)
2. Look for "Create New Project" button
3. Attempt to access User Management section from navigation
4. Navigate to a project where the user is assigned as a Project Manager
5. Look for and click on "Edit Project" button
6. Navigate to project documents section
7. Attempt to upload documents (TC-DH2)
8. Attempt to create folders (TC-DH4)
9. Attempt to delete documents (TC-DH9)
10. Navigate to project members section
11. Attempt to add a user to the project (TC-PM7)
12. Look for archive/delete project options

### Expected Results
- Project Manager cannot see "Create New Project" button (not visible)
- Project Manager cannot access User Management (option not visible in navigation)
- Project Manager can update details of projects they manage (Edit Project button is visible)
- Project Manager can upload documents, create folders, delete documents in their projects
- Project Manager can add users to projects they manage
- Project Manager cannot see archive or delete project options (not visible)

### UI Elements
- Projects dashboard without "Create New Project" button
- Navigation menu without "User Management" link
- Project details page with limited action buttons:
  - "Edit Project" button with edit icon (visible)
  - "Delete Project" button with delete icon (not visible)
  - "Manage Members" button with people icon (visible)
  - "View Documents" button with folder icon (visible)
- Document management tools in project documents page:
  - "Upload" button
  - "Create Folder" button
  - Document list with delete options

## TC-SP3: Role-Based Access Control - Team Member

### Description
Verify that a Team Member has access to features according to their role.

### Pre-conditions
- User is logged in as a Team Member (TC-C1)

### Test Steps
1. Navigate to the projects dashboard (TC-C3)
2. Look for "Create New Project" button
3. Attempt to access User Management section from navigation
4. Navigate to a project where the user is assigned as a Team Member
5. Look for "Edit Project" button
6. Look for "Upload" button in documents section
7. Look for "Create Folder" button in documents section
8. Look for delete options for documents
9. Look for "Add Member" button in project members section

### Expected Results
- Team Member cannot see "Create New Project" button (not visible)
- Team Member cannot access User Management (option not visible in navigation)
- Team Member cannot see "Edit Project" button (not visible)
- Team Member cannot see "Upload" or "Create Folder" buttons (not visible)
- Team Member cannot see delete options for documents (not visible)
- Team Member cannot see "Add Member" button (not visible)
- Team Member can view project details and documents they have access to

### UI Elements
- Projects dashboard without "Create New Project" button
- Navigation menu without "User Management" link
- Project details page with limited action buttons:
  - "Edit Project" button with edit icon (not visible)
  - "Delete Project" button with delete icon (not visible)
  - "Manage Members" button with people icon (visible but with limited options)
  - "View Documents" button with folder icon (visible)
- Document list without action buttons for modifying content

## TC-SP4: Project Access Control

### Description
Verify that users can only access projects they are members of.

### Pre-conditions
- Multiple users exist in the system with different roles
- Multiple projects exist in the system
- Users are members of some projects but not others

### Test Steps
1. Log in as a Team Member (TC-C1)
2. Navigate to the projects dashboard (TC-C3)
3. Observe the list of projects
4. Attempt to access a project the user is a member of
5. Attempt to access a project the user is not a member of (by directly entering the URL)
6. Log out and repeat with a Project Manager
7. Log out and repeat with a Director

### Expected Results
- Team Member and Project Manager can only see projects they are members of in the projects list
- Team Member and Project Manager can access projects they are members of
- Team Member and Project Manager cannot access projects they are not members of (receive "access denied" or are redirected)
- Director can see and access all projects

### UI Elements
- Projects list showing only accessible projects
- Project details page
- Access denied page or error message when attempting to access unauthorized projects
- Toast notification for access errors

## TC-SP5: Document Access Control

### Description
Verify that users can only access documents in projects they are members of.

### Pre-conditions
- User is logged in (TC-C1)
- User is a member of Project A but not Project B
- Both projects have documents

### Test Steps
1. Navigate to Project A's documents section (TC-DH1)
2. Attempt to view a document in Project A (TC-DH5)
3. Attempt to access a document in Project B by directly entering its URL

### Expected Results
- User can successfully view documents in Project A
- User cannot access documents in Project B (receives "access denied" or is redirected)

### UI Elements
- Document viewer for accessible documents
- Access denied page or error message when attempting to access unauthorized documents
- Toast notification for access errors

## TC-SP6: Authentication Token Expiration

### Description
Verify that authentication tokens expire after the configured timeout period.

### Pre-conditions
- User is logged in (TC-C1)
- Authentication token has a configured expiration time

### Test Steps
1. Perform some actions in the system
2. Leave the system idle for longer than the token expiration time
3. Attempt to perform an action that requires authentication

### Expected Results
- After the token expires, the user's action fails
- User is redirected to the login page
- After logging in again, the user can continue using the system

### UI Elements
- Session timeout notification (if implemented)
- Redirect to login page
- Login form

## TC-SP7: Password Strength Requirements

### Description
Verify that the system enforces password strength requirements during user creation.

### Pre-conditions
- User is logged in as a Director (TC-C1)
- User has navigated to the User Management section (TC-C4)

### Test Steps
1. Click on "Create User" button
2. Enter valid user details in the name and email fields
3. Enter various passwords with different strength characteristics:
   a. Too short (e.g., less than 8 characters)
   b. No uppercase letters
   c. No lowercase letters
   d. No numbers
   e. No special characters
   f. A strong password meeting all requirements
4. Observe the password strength indicator and validation messages

### Expected Results
- System displays a password strength indicator that changes based on password content
- System rejects passwords that don't meet the minimum strength requirements
- For each rejection, appropriate error messages are displayed
- Strong password is accepted
- Password strength indicator visually shows password strength level

### UI Elements
- Create User modal
- Password input field
- Password strength indicator with:
  - Visual strength meter (color-coded bar or similar)
  - Text description of strength level
- Validation error messages for password requirements
- "Create" button (disabled until requirements are met)

## TC-SP8: Cross-Site Request Forgery (CSRF) Protection

### Description
Verify that the system is protected against CSRF attacks.

### Pre-conditions
- User is logged in (TC-C1)

### Test Steps
1. Intercept a form submission request using a web proxy tool
2. Note any CSRF tokens in the request
3. Attempt to replay the request without the CSRF token
4. Attempt to replay the request with an invalid CSRF token

### Expected Results
- Requests without a valid CSRF token are rejected
- System logs security events appropriately
- User session remains intact

### UI Elements
- Not directly visible in UI (backend security feature)
- Possibly error messages if testing from browser developer tools

## TC-SP9: Session Timeout

### Description
Verify that user sessions timeout after a period of inactivity.

### Pre-conditions
- User is logged in (TC-C1)

### Test Steps
1. Perform some actions in the system
2. Leave the system idle for longer than the session timeout period
3. Attempt to perform an action in the system

### Expected Results
- After the session timeout, the user is redirected to the login page
- User must log in again to continue using the system
- User receives appropriate notification about the session timeout

### UI Elements
- Session timeout notification or modal (if implemented)
- Redirect to login page
- Login form
- Toast notification about session expiration (if implemented)

## TC-SP10: Audit Logging

### Description
Verify that the system logs security-relevant events.

### Pre-conditions
- Access to system logs
- Multiple user accounts with different roles

### Test Steps
1. Perform various security-relevant actions:
   a. User login (successful and failed attempts)
   b. User logout
   c. User creation
   d. Role changes
   e. Project access
   f. Document access
   g. Document deletion
2. Review system logs

### Expected Results
- All security-relevant actions are logged
- Logs include timestamp, user ID, action type, and relevant details
- Failed login attempts are logged with appropriate information
- Sensitive operations (user creation, role changes, etc.) are logged in detail

### UI Elements
- Admin interface for logs (if implemented)
- No direct UI elements for standard users 